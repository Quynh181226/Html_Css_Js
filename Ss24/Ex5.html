<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body>
<script>
    let arr = [];
    var sum = 0;
    let choice, rows, cols;
    do {
        let menu = (`
    ==========MENU==========
    1. Nhập mảng 2 chiều
    2. Hiển thị mảng 2 chiều
    3. Tính tổng các phần tử trong mảng
    4. Tính tổng đường chéo chính
    5. Tính tổng đường chéo phụ
    6. Tính trung bình cộng các phần tử trong một hàng hoặc một cột (Người dùng chọn hàng hoặc cột cần tính toán)
    7. Exit
    ========================
Your choice is: `);
        choice = parseInt(prompt(menu));
        switch (choice) {
            case 1:
                rows = +prompt(`Input number of rows: `);
                cols = +prompt(`Input number of columns: `);
                arr = [];
                for (let i = 0; i < rows; i++) {
                    arr[i] = [];
                    for (let j = 0; j < cols; j++) {
                        arr[i][j] = +prompt(`Input row ${i + 1} col ${j + 1}:`);
                    }
                }
                break;
            case 2:
                if (arr.length === 0) {
                    alert(`Array empty`);
                } else {
                    let result = "";
                    for (let i = 0; i < rows; i++) {
                        result += arr[i].join(" ") + "\n";
                    }
                    alert(`Elements of array:\n${result}`);
                }
                break;
            case 3:
                if (arr.length === 0) {
                    alert(`Array empty`);
                } else {
                    sum = 0;
                    for (let i = 0; i < rows; i++) {
                        for (let j = 0; j < cols; j++) {
                            sum += arr[i][j];
                        }
                    }
                    alert(`Total is: ${sum}`);
                }
                break;
            case 4:
                if (arr.length === 0) {
                    alert(`Array empty`);
                } else if (rows !== cols) {
                    alert(`Not main diagonal`);
                } else {
                    sum = 0;
                    for (let i = 0; i < rows; i++) {
                        sum += arr[i][i];
                    }
                    alert(`Total main diagonal: ${sum}`);
                }
                break;
            case 5:
                if (arr.length === 0) {
                    alert(`Array empty`);
                } else if (rows !== cols) {
                    alert(`Not sub diagonal`);
                } else {
                    sum = 0;
                    for (let i = 0; i < rows; i++) {
                        sum += arr[i][rows - i - 1];
                    }
                    alert(`Total sub diagonal: ${sum}`);
                }
                break;
            case 6:
                if (arr.length === 0) {
                    alert(`Array empty`);
                } else {
                    let smallSelect;
                    do {
                        smallSelect = +prompt("1. Row\n2. Column");
                    } while (![1, 2].includes(smallSelect));

                    let index, check;
                    if (smallSelect === 1) {
                        do {
                            index = +prompt("Input row: ");
                            check = Number.isInteger(index) && index >= 0 && index < rows ? false : true;
                        } while (check);

                        sum = 0;
                        for (let j = 0; j < cols; j++) {
                            sum += arr[index][j];
                        }
                        let avg = sum / cols;
                        alert(`Avg row ${index} is: ${avg}`);
                    } else {
                        do {
                            index = +prompt("Input column: ");
                            check = Number.isInteger(index) && index >= 0 && index < cols ? false : true;
                        } while (check);

                        sum = 0;
                        for (let i = 0; i < rows; i++) {
                            sum += arr[i][index];
                        }
                        let avg = sum / rows;
                        alert(`Avg column ${index} is: ${avg}`);
                    }
                }
                break;
            case 7:
                alert(`Exit program`);
                break;
            default:
                alert(`Invalid`);
                break;
        }
    } while (choice !== 7);
</script>
</body>

</html>
