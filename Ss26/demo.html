<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    let numbers=[1,22,44,3,2];
    let sum=0;
    for (let i = 0; i < numbers.length; i++) {
        sum+= numbers[i];

    }
    //accumulator: biến tích lũy
    // let result= numbers.reduce((accumulator,item, ar)=>{
    //     console.log("hello");

    //     return accumulator+item;
    // })
    // console.log(result);
    let cart=[["mèn mén", 4, 20000], ["bánh bao", 3, 8000]];

    let result= cart.reduce((accumulator,item,arr)=>{
        return accumulator+ item[1]*item[2]
    },6000)
    console.log(result);
    /*
         Các phương thức làm việc với mảng, giúp xử lý giải quyết vấn đề nhanh
         ==> dùng for thường làm được hết
         I- đầu vào
         II- đầu ra
         1. indexOf()
             -đầu vào là phần tử cần kiểm tra
             -đầu ra vị trí
                 + nếu có trả về vị trí phần tử
                 + nếu không có trả vè -1
         2. includes()
             -đầu vào là phần tử cần kiểm tra
             -đầu ra trả về true/flase
         3. filter(): lọc _ cũng tạo mảng mới
             _ đầu vào là 1 call back tức là 1 hàm
             - đầu ra
                 + trả về 1 cái mảng chứa các phần tử thỏa mãn điều kiện lọc
         4. findIndex()
             - đầu vào 1 callback tức là 1 hàm
             - đầu ra
                 + nếu có phần từ trả về vị trí
                 + không thì trả về -1
         5. find ()
             -đầu vào nhận 1 hàm
             - đầu ra
                 + nếu có trả về phần tử
                 + không có trả về undefined
         6. reduce(): tính toán giá trị
            - đầu vào nhận vào 2 giá trị 1 là hàm, 2 là giá trị khởi tạo
         7. forEach: đầu vào nhận vào hàm
             + không trả về giá trị
             + tương tác trực tiếp với các phần tử trong mảng
         8. map()
             + tạo ra mảng mới
             + duyệt qua các phần tử



     */
    let students=["hoa", "hồng", "nhung"];
    let numbers =[11,3,44,3,5,77,6,66];
    //    let result= numbers.filter(function name(item,index,arr) {
    //         return item>20;
    //    })
    //    console.log(1111,result);
    //    let index= students.findIndex((item,index)=>{
    //                 return item=="nhung1";
    //    })
    //    console.log(index);

    let products=[
        {
            name:"mì tôm",
            price:5000,
            id:1
        },
        {
            name:"mèn mén",
            price:15000,
            id:2
        }
    ]
    let result= products.find((element, index, arr)=>{
        return element.id==3;
    })
    console.log(1111111,result);


    //HOF:
//    1. Tái sử dụng mã : Giảm lặp lại code = cách đóng gói logic chung
//    2. Trừu tượng hóa: Tách biệt logic xử lý tổng quát khỏi chi tiết cụ thế
// HOF (Higher Ordered Function)

const greet = (name, callback) => {
    callback();
    console.log(`Hello: ${name}`);
};

const sayHi = () => {
    console.log("Say hi");
};

const readNumber = () => {
    for (let index = 0; index <= 10; index++) {
        console.log(index);
    }
};

const renderNumber = (callback) => {
    callback();
};

greet("Hiaz", sayHi);
renderNumber(readNumber);


// forEach
let arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
// arr.forEach((element, index) => {
//     console.log(`elment thu ${index}: ${element}`); s
// });

// arr.forEach(function (value, index) {
//     console.log("Value - Index", value, index);
// });


// filter: lap qua cac ptu cua mang -> mang moi thoa man dk loc
// let newArr = arr.filter((value, index) => value % 2 === 0);
// console.log(newArr);

// // find:  tim kiem phan tu bat ki trong mang
// let result = arr.find((value) => value === 10);
// console.log(`Result: ${result}`);

// // map: lap qua cac ptu cua mang -> mang moi co sl ptu === sl ptu mang cu, va da dc edit

// let result2 = arr.map((value, index) => `Tai vi tri ${index} la: ${value}`);
// console.log("result2: ", result2);


// const names = ["Nguyen Van A", "Nguyen Van B", "Nguyen Van C"]

// // Fill all item vao ds ul
// let html = names.map((value, index) => {
//     return `<li>${index}: ${value}</li>`;
// });
// console.log("hrml: ", html);


// reduce: tinh toan va tra ve kq
const carts = [100, 200, 300, 400, 500];

let price = carts.reduce((previousValue, currentValue) => previousValue + currentValue, 0);
console.log("Price: ", price);


const scores = [5, 3, 2, 7, 10];
// // some & every
// let check = scores.every((value) => value % 2 === 0);
// console.log("Check: ", check);

// check = scores.some((value) => value % 2 === 0);
// console.log("Check: ", check);

// // fill
// scores.fill(5, 0, scores.length);
// console.log("Fill: ", scores);

let findResult = scores.includes(3);
console.log("FindResult: ", findResult);

// concat(): noi mang
const scores2 = [2, 1, 0, -8];

const mergeArr = scores.concat(scores2).sort((a, b) => a - b);
console.log(mergeArr);

//forEach-pthuc cua doi tg array
//Dung de duyet qua cach phan tu cua mang va thuc thi 1 ham callback tren moi phan tu

//Cu phap: array.forEach(callback(currentValue[, index[, array]])[, thisArg])

//+ callback: Ham duoc goi cho moi phan tu trong mang (Ham nay nhan 3 tham so)
//  - currentValue : Gia tri cua phan tu htai(bat buoc)
//  - index(tùy chọn-optional): Chi so cua phan tu hien tai
//  - array(optional): Mang goc ma forEach dg lap qua
//+ thisArg(optional) : Gia tri dung lam this trg ham callback

//Gia tri tra ve : undefined

//Map: Pthuc de tao 1 mang ms = cach ap dung ham callback len "tung phan tu" cua mang "goc"

//Cu phap: array.map(callback(element[, index[, array]])[, thisArg])

//+ callback: Ham duoc goi cho moi phan tu trong mang, tra ve gtri ms cho ptu do
//  - currentValue : Gia tri cua phan tu htai(bat buoc)
//  - index(tùy chọn-optional): Chi so cua phan tu hien tai
//  - array(optional): Mang goc ma map dg lap qua
//+ thisArg(optional) : Gia tri dung lam this trg ham callback

//Gia tri tra ve : Gia tri tra ve cua callback se tro thanh ptu tuong ung trg mang moi

//eg:
let numbers=[1,23,5,6];
// let double=numbers.map(num)

//Filter

//Reduce
//Duoc sdung de duyet qua cac ptu cua mang va rut gon chung thanh 1 gtri duy nhat thong qua ham callback
//Gtri nay co the la bat ky kieu du lieu nao
//Cu phap: array.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])

//callback: Hàm được gọi cho từng phần tử trong mảng, nhận các tham số:
// accumulator: Giá trị tích lũy (kết quả của lần tính toán trước đó).
// currentValue: Phần tử hiện tại đang xử lý.
//index (tùy chọn): Chỉ số của phần tử hiện tại.
// array (tùy chọn): Mảng gốc mà reduce được gọi.
// initialValue (tùy chọn): Giá trị khởi tạo cho accumulator. Nếu không cung cấp, accumulator sẽ là phần tử đầu tiên của mảng và reduce bắt đầu từ phần tử thứ hai.

//Giá trị trả về: Giá trị cuối cùng của accumulator sau khi duyệt hết mảng.
//Ko lam thay doi mang ban dau, chi tra ve 1 gtri ms

// Cách hoạt động của reduce
//     - reduce duyệt qua mảng từ trái sang phải.
//     Mỗi lần gọi callback, giá trị trả về của callback được gán lại cho accumulator.
//     Giá trị cuối cùng của accumulator là kết quả của reduce.
// Với initialValue:
//     Bắt đầu từ phần tử đầu tiên, accumulator được gán giá trị initialValue.
//     Không có initialValue:
//     accumulator lấy giá trị của phần tử đầu tiên, và bắt đầu xử lý từ phần tử thứ hai.

//eg1: Tinh tong cac phan tu cua mang
let number=[1,23,5,2];
let sum=number.reduce((accumulator, currentValue)=>accumulator + currentValue, 0);
console.log(sum);
console.log(number);
console.log("Array is: "+number);
// initialValue là 0.
// Lần 1: accumulator = 0, currentValue = 1 → 0 + 1 = 1.
// Lần 2: accumulator = 1, currentValue = 2 → 1 + 2 = 3.
// Lần 3: accumulator = 3, currentValue = 3 → 3 + 3 = 6.
// Lần 4: accumulator = 6, currentValue = 4 → 6 + 4 = 10.

//eg2: Nhan tat ca cac phan tu trg mang
let number1 = [2, 3, 4];
let product = number1.reduce((accumulator, currentValue) => accumulator + currentValue, 1);
let product1= number1.reduce((accumulator, currentValue) => accumulator * currentValue, 1);
console.log(product);
console.log(product1);
</script>
</body>
</html>